"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[256],{6256:function(e,s,n){n.r(s),n.d(s,{default:function(){return C}});var a=n(9439),r=n(2791),l=n(8890),t=n.n(l),i=n(2144),d=n(3360),o=n(1933),u=n(71),c=n(1374),p=n(7871),h=n(3433),x=n(5316),m=n(8041),j=n(5705),f=n(8007),v=n(184);var y=function(e){var s=e.data,n=(0,o.useQueryClient)(),a=(0,r.useContext)(p.H),l=a.proState,t=a.proDispatch,i={id:null===s||void 0===s?void 0:s.id,name:null===s||void 0===s?void 0:s.name,telephone:null===s||void 0===s?void 0:s.telephone,address:null===s||void 0===s?void 0:s.address},y=f.Ry().shape({name:f.Z_().trim().required("Required*"),telephone:f.Rx().required("Required*"),address:f.Z_().required("Required*")}),b=(0,o.useMutation)("suppliers",c.Ww).mutateAsync;return(0,v.jsxs)(x.Z,{show:l.showSupplierEditModal,onHide:function(){return t({type:"showSupplierEditModal",payload:!1})},children:[(0,v.jsx)(x.Z.Header,{children:(0,v.jsxs)(x.Z.Title,{children:[(0,v.jsx)(u.JIY,{})," Edit Supplier"]})}),(0,v.jsx)(j.J9,{initialValues:i,validationSchema:y,onSubmit:function(e,s){b(e,{onSuccess:function(e){s.setSubmitting(!1),alert("Changes Saved"),n.setQueryData("suppliers",(function(s){return[].concat((0,h.Z)(s),[e])})),t({type:"showSupplierEditModal",payload:!1})},onError:function(e){return alert(null===e||void 0===e?void 0:e.message)}})},enableReinitialize:!0,children:function(e){var s=e.handleChange,n=e.handleSubmit,a=e.errors,r=e.isSubmitting,l=e.touched,i=e.values;return(0,v.jsxs)(m.Z,{className:"py-4",children:[(0,v.jsxs)(x.Z.Body,{className:"p-4",children:[(0,v.jsx)(m.Z.Control,{type:"hidden",name:"id",value:i.id,onChange:s("id")}),(0,v.jsxs)(m.Z.Group,{className:"pb-3",controlId:"name",children:[(0,v.jsx)(m.Z.Label,{children:"Name"}),(0,v.jsx)(m.Z.Control,{type:"text",placeholder:"Enter Supplier Name",name:"name",value:i.name,onChange:s("name")}),l.name&&a.name?(0,v.jsx)(m.Z.Text,{className:"text-danger",children:a.name}):null]}),(0,v.jsxs)(m.Z.Group,{className:"pb-3",controlId:"telephone",children:[(0,v.jsx)(m.Z.Label,{children:"Telephone"}),(0,v.jsx)(m.Z.Control,{type:"text",placeholder:"Enter telephone",name:"telephone",value:i.telephone,onChange:s("telephone"),onError:function(e){return alert(e)}}),l.telephone&&a.telephone?(0,v.jsx)(m.Z.Text,{className:"text-danger",children:a.telephone}):null]}),(0,v.jsxs)(m.Z.Group,{className:"pb-3",controlId:"address",children:[(0,v.jsx)(m.Z.Label,{children:"address"}),(0,v.jsx)(m.Z.Control,{as:"textarea",rows:3,placeholder:"Enter address",name:"address",value:i.address,onChange:s("address")}),l.address&&a.address?(0,v.jsx)(m.Z.Text,{className:"text-danger",children:a.address}):null]})]}),(0,v.jsxs)(x.Z.Footer,{children:[(0,v.jsx)(d.Z,{style:{background:"#e2ad0e",borderColor:"#e2ad0e"},variant:"dark",type:"submit",onClick:n,disabled:r,children:r?(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("span",{children:"Please Wait... "}),(0,v.jsx)("span",{className:"spinner-border spinner-border-sm"})]}):"Save Changes"}),(0,v.jsx)(d.Z,{variant:"light",onClick:function(){return t({type:"showSupplierEditModal",payload:!1})},children:"Cancel"})]})]})}})]})},b=n(9450),Z=n(1413);var S=function(e){var s=e.supplier,n=e.setSuppViewData;return(0,v.jsxs)(x.Z,{as:"div",keyboard:!0,animation:!0,show:s.visible,onHide:function(e){return n((0,Z.Z)((0,Z.Z)({},e),{},{visible:!1}))},children:[(0,v.jsx)(x.Z.Header,{closeButton:!0,children:(0,v.jsx)(x.Z.Title,{children:" supplier Details"})}),(0,v.jsxs)(x.Z.Body,{children:[(0,v.jsx)("p",{className:"fw-bold text-primary",children:"Name "}),(0,v.jsx)("p",{className:"lead",children:s.name}),(0,v.jsx)("p",{className:"fw-bold text-primary",children:"Address "}),(0,v.jsx)("p",{className:"lead",children:s.address}),(0,v.jsx)("p",{className:"fw-bold text-primary",children:"Telephone "}),(0,v.jsx)("p",{className:"lead",children:s.telephone})]})]})};var C=function(){var e=(0,r.useRef)(null),s=(0,r.useContext)(p.H).proDispatch,n=(0,r.useState)({}),l=(0,a.Z)(n,2),h=l[0],x=l[1],m=(0,r.useState)({visible:!1,name:"",address:"",telephone:""}),j=(0,a.Z)(m,2),f=j[0],Z=j[1],C=(0,o.useQueryClient)(),N=(0,o.useQuery)("suppliers",c.yn),w=(0,o.useMutation)(c.eT,{onMutate:function(e){C.invalidateQueries("suppliers");var s=C.getQueryData("suppliers");return C.setQueryData("suppliers",(function(s){return s.filter((function(s){return s.id!==e}))})),s},onSuccess:function(){alert("data deleted")},onError:function(e,s,n){C.setQueryData(n.data)},onSettled:function(){C.invalidateQueries("suppliers")}}).mutateAsync;return(0,r.useEffect)((function(){t()("#".concat(e.current.id)).DataTable({scrollY:400,scrollX:!0,scrollCollapse:!0,fixedHeader:!0,bInfo:!1,scrollResize:!0,destroy:!0,responsive:!0,data:N?N.data:[],columns:(0,b.j0)((function(e){Z({visible:!0,name:e.name,address:e.address,telephone:e.telephone})}),(function(e){x(e),s({type:"showSupplierEditModal",payload:!0})}),(function(e){w(e)}))})}),[N,s,w]),(0,v.jsxs)(v.Fragment,{children:[(0,v.jsxs)(i.Z,{className:"shadow",children:[(0,v.jsx)(i.Z.Header,{className:"text-primary d-flex justify-content-end",children:(0,v.jsxs)(d.Z,{variant:"primary",onClick:function(){return s({type:"showSupplierAddModal",payload:!0})},children:[(0,v.jsx)(u.xcL,{})," Add Supplier"]})}),(0,v.jsx)(i.Z.Body,{className:"p-4",children:(0,v.jsxs)("table",{width:"100%",className:"table table-sm table-responsive table-hover table bordered ",id:"supplier-table",ref:e,children:[(0,v.jsx)("thead",{children:(0,v.jsxs)("tr",{children:[(0,v.jsx)("th",{children:"Id"}),(0,v.jsx)("th",{children:"Name"}),(0,v.jsx)("th",{children:"Address"}),(0,v.jsx)("th",{children:"Telephone"}),(0,v.jsx)("th",{children:"Action"})]})}),(0,v.jsx)("tbody",{})]})})]}),(0,v.jsx)(S,{supplier:f,setSuppViewData:Z}),(0,v.jsx)(y,{data:h})]})}}}]);
//# sourceMappingURL=256.b1716fa7.chunk.js.map